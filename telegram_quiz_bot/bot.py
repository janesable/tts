print("–ö–æ–¥ –Ω–∞—á–∞–ª –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è...")
import logging
from aiogram import Bot, Dispatcher, types
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton
from aiogram.filters import Command
from aiogram.types import WebAppInfo
import asyncio

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –¢–æ–∫–µ–Ω —Ç–≤–æ–µ–≥–æ –±–æ—Ç–∞
TOKEN = "7110746024:AAEoPCxb06_4IN0fY8aMVkVw0VIDSEVmHVE"

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
bot = Bot(token=TOKEN)
dp = Dispatcher()

# –î–∞–Ω–Ω—ã–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
quiz_data = [
    {
        "question": "1. –ö–∞–∫–æ–π –∫–æ–º–∞—Ä —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–æ—Å—á–∏–∫–æ–º –º–∞–ª—è—Ä–∏–∏?",
        "options": ["Culex", "Anopheles", "Aedes"],
        "correct": 1,
        "explanation": "–ö–æ–º–∞—Ä—ã —Ä–æ–¥–∞ *Anopheles* —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–Ω–æ—Å—á–∏–∫–∞–º–∏ –≤–æ–∑–±—É–¥–∏—Ç–µ–ª—è –º–∞–ª—è—Ä–∏–∏ - –º–∞–ª—è—Ä–∏–π–Ω–æ–≥–æ –ø–ª–∞–∑–º–æ–¥–∏—è. –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –º–æ–∂–Ω–æ –ø–æ [—Å—Å—ã–ª–∫–µ](https://www.who.int/ru/news-room/fact-sheets/detail/malaria)."
    },
    {
        "question": "2. –°–∫–æ–ª—å–∫–æ —Å—Ç–∞–¥–∏–π –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø—Ä–µ—Ç–µ—Ä–ø–µ–≤–∞–µ—Ç –º–∞–ª—è—Ä–∏–π–Ω—ã–π –ø–ª–∞–∑–º–æ–¥–∏–π, –ø–æ–ø–∞–¥–∞—è –≤ –∫—Ä–æ–≤—å —á–µ–ª–æ–≤–µ–∫–∞?",
        "options": ["2", "3", "4"],
        "correct": 2,
        "explanation": "–†–∞–∑–≤–∏—Ç–∏–µ –ø–ª–∞–∑–º–æ–¥–∏–µ–≤ –≤ —ç—Ä–∏—Ç—Ä–æ—Ü–∏—Ç–∞—Ö –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ç—ã—Ä–µ —Å—Ç–∞–¥–∏–∏: –∫–æ–ª—å—Ü–∞ (—Ç—Ä–æ—Ñ–æ–∑–æ–∏—Ç–∞), –∞–º–µ–±–æ–≤–∏–¥–Ω–æ–≥–æ —à–∏–∑–æ–Ω—Ç–∞, —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ (–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–æ—Ä—É–ª—ã) –∏ (–¥–ª—è —á–∞—Å—Ç–∏ –ø–∞—Ä–∞–∑–∏—Ç–æ–≤) –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≥–∞–º–µ—Ç–æ—Ü–∏—Ç–æ–≤.. –ü–æ–¥—Ä–æ–±–Ω–µ–µ [–∑–¥–µ—Å—å](https://www.medicoverhospitals.in/ru/articles/malaria-life-cycle)."
    },
    {
         "question": "3. –°–∫–æ–ª—å–∫–æ –≤–∏–¥–æ–≤ –º–∞–ª—è—Ä–∏–π–Ω—ã—Ö –∫–æ–º–∞—Ä–æ–≤ —Ä–æ–¥–∞ Anopheles —Å–ø–æ—Å–æ–±–Ω—ã –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –º–∞–ª—è—Ä–∏—é?",
         "options": ["–ú–µ–Ω–µ–µ 10", "–û–∫–æ–ª–æ 30", "–ë–æ–ª–µ–µ 60", "–ë–æ–ª–µ–µ 200"],
         "correct": 2,
         "explanation": " –¢–æ–ª—å–∫–æ –æ–∫–æ–ª–æ 70 –∏–∑ –±–æ–ª–µ–µ —á–µ–º 450 –≤–∏–¥–æ–≤ Anopheles —Å–ø–æ—Å–æ–±–Ω—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –º–∞–ª—è—Ä–∏—é. –ù–µ –≤–µ—Ä–∏—à—å? –°–º–æ—Ç—Ä–∏ [–∑–¥–µ—Å—å] (https://www.science.org/doi/10.1126/science.1258522)"
    },
    {
         "question": "4. –ö–∞–∫–æ–π –≤–∏–¥ –º–∞–ª—è—Ä–∏–π–Ω–æ–≥–æ –ø–∞—Ä–∞–∑–∏—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∞–º—ã–µ —Ç—è–∂–µ–ª—ã–µ —Ñ–æ—Ä–º—ã –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è —É —á–µ–ª–æ–≤–µ–∫–∞?",
         "options": ["Plasmodium vivax", "Plasmodium malariae", "Plasmodium falciparum", "Plasmodium ovale"],
         "correct": 2,
         "explanation": " Plasmodium falciparum —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Å–º–µ—Ä—Ç–æ–Ω–æ—Å–Ω—ã–º –≤–∏–¥–æ–º –º–∞–ª—è—Ä–∏–π–Ω–æ–≥–æ –ø–∞—Ä–∞–∑–∏—Ç–∞, –≤—ã–∑—ã–≤–∞—è —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—É—é —Ç—Ä–æ–ø–∏—á–µ—Å–∫—É—é –º–∞–ª—è—Ä–∏—é –∏ –æ–∫–æ–ª–æ 90% –≤—Å–µ—Ö —Å–º–µ—Ä—Ç–µ–π –æ—Ç –º–∞–ª—è—Ä–∏–∏. –í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, Plasmodium vivax –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –Ω–µ–ª–µ—Ç–∞–ª—å–Ω—É—é —Ç—Ä–µ—Ö-–¥–Ω–µ–≤–Ω—É—é –º–∞–ª—è—Ä–∏—é, –∫–æ—Ç–æ—Ä–∞—è –º–µ–Ω–µ–µ –æ–ø–∞—Å–Ω–∞—è. [–ò—Å—Ç–æ—á–Ω–∏–∫](https://www.who.int/ru/news-room/facts-in-pictures/detail/malaria)"
    },
    {
         "question": "5. –ö–∞–∫–æ–π –æ—Ä–≥–∞–Ω –º–∞–ª—è—Ä–∏–π–Ω—ã–π –ø–∞—Ä–∞–∑–∏—Ç –ø–æ—Ä–∞–∂–∞–µ—Ç –ø–µ—Ä–≤—ã–º –ø–æ—Å–ª–µ —É–∫—É—Å–∞ –∫–æ–º–∞—Ä–∞?",
         "options": ["–°–µ—Ä–¥—Ü–µ", "–ü–µ—á–µ–Ω—å", "–õ–µ–≥–∫–∏–µ", "–ì–æ–ª–æ–≤–Ω–æ–π –º–æ–∑–≥"],
         "correct": 1,
         "explanation": "–ü–æ—Å–ª–µ —É–∫—É—Å–∞ –∫–æ–º–∞—Ä–∞ –ø–∞—Ä–∞–∑–∏—Ç –º–∏–≥—Ä–∏—Ä—É–µ—Ç –≤ –ø–µ—á–µ–Ω—å, –≥–¥–µ —Ä–∞–∑–º–Ω–æ–∂–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º –≤ –∫—Ä–æ–≤—å. [–ò—Å—Ç–æ—á–Ω–∏–∫](https://ru.wikipedia.org/wiki/–ú–∞–ª—è—Ä–∏—è#–≠—Ç–∏–æ–ª–æ–≥–∏—è_–∏_–ø–∞—Ç–æ–≥–µ–Ω–µ–∑)"
    },
    {
         "question": "6. –ß—Ç–æ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –º–∞–ª—è—Ä–∏–π–Ω—ã—Ö –∫–æ–º–∞—Ä–æ–≤ –∫ —á–µ–ª–æ–≤–µ–∫—É?",
         "options": ["–°–≤–µ—Ç", "–£–≥–ª–µ–∫–∏—Å–ª—ã–π –≥–∞–∑", "–í—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞", "–í—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–µ"],
         "correct": 3,
         "explanation": "–ú–∞–ª—è—Ä–∏–π–Ω—ã–µ –∫–æ–º–∞—Ä—ã –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Ç–µ–ø–ª–æ —Ç–µ–ª–∞, –∑–∞–ø–∞—Ö –ø–æ—Ç–∞ –∏ —É–≥–ª–µ–∫–∏—Å–ª—ã–π –≥–∞–∑, –≤—ã–¥–µ–ª—è–µ–º—ã–π –¥—ã—Ö–∞–Ω–∏–µ–º. –ì–¥–µ –ø–æ—á–∏—Ç–∞—Ç—å? [–ó–¥–µ—Å—å](https://malariajournal.biomedcentral.com/articles/10.1186/1475-2875-9-292)"
    },
    {
         "question": "7. –ö–∞–∫–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ –º–∞–ª—è—Ä–∏–∏?",
         "options": ["–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è", "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ—Å–∫–∏—Ç–Ω—ã—Ö —Å–µ—Ç–æ–∫ —Å –∏–Ω—Å–µ–∫—Ç–∏—Ü–∏–¥–∞–º–∏", "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–Ω—Ç–∏–±–∏–æ—Ç–∏–∫–æ–≤", "–°–Ω–∏–∂–µ–Ω–∏–µ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –≤–æ–∑–¥—É—Ö–∞"],
         "correct": 1,
         "explanation": "–ú–æ—Å–∫–∏—Ç–Ω—ã–µ —Å–µ—Ç–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏–Ω—Å–µ–∫—Ç–∏—Ü–∏–¥–∞–º–∏, —è–≤–ª—è—é—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –º–µ—Ç–æ–¥–æ–º –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏. –¢–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç [–í–û–ó](https://www.who.int/ru/news-room/facts-in-pictures/detail/malaria)"
    },
    {
         "question": "8. –ö–∞–∫–æ–π –≤–∏–¥ –º–∞–ª—è—Ä–∏–π–Ω–æ–≥–æ –∫–æ–º–∞—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –ø–µ—Ä–µ–Ω–æ—Å—á–∏–∫–æ–º –º–∞–ª—è—Ä–∏–∏ –≤ –ê—Ñ—Ä–∏–∫–µ?",
         "options": ["Anopheles stephensi", "Anopheles albimanus", "Anopheles gambiae", "Anopheles quadrimaculatus"],
         "correct": 2,
         "explanation": "Anopheles stephensi –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –Ω–∞ –ê—Ä–∞–≤–∏–π—Å–∫–æ–º –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤–µ, Anopheles albimanus - –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –∂–∏—Ç–µ–ª—å —Ä–µ–≥–∏–æ–Ω–æ–≤ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–º–µ—Ä–∏–∫–∏, Anopheles quadrimaculatus —Å–∫–æ—Ä–æ–º–Ω–æ –ª–µ—Ç–∞–µ—Ç –ø–æ –°–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã–º –®—Ç–∞—Ç–∞–º. –ï—Å—Ç—å —Ö–æ—Ä–æ—à–∞—è [–∫–∞—Ä—Ç–∏–Ω–∫–∞](https://upload.wikimedia.org/wikipedia/commons/a/ad/Anopheles-range-map.png), –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –º–∞–ª—è—Ä–∏–π–Ω—ã—Ö –∫–æ–º–∞—Ä–æ–≤"
    },
    {
         "question": "9. –ö–∞–∫–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–∞–ª—è—Ä–∏–π–Ω—ã—Ö –∫–æ–º–∞—Ä–æ–≤ —Å —Ü–µ–ª—å—é —Å–Ω–∏–∂–µ–Ω–∏—è –∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–∞–ª—è—Ä–∏—é?",
         "options": ["CRISPR-Cas9", "RNA interference", "TALENs", "ZFN"],
         "correct": 0,
         "explanation": "CRISPR-Cas9 —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–µ–Ω–æ–º–∞ –º–∞–ª—è—Ä–∏–π–Ω—ã—Ö –∫–æ–º–∞—Ä–æ–≤, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–æ–∑–±—É–¥–∏—Ç–µ–ª—è –º–∞–ª—è—Ä–∏–∏. [–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º](https://pmc.ncbi.nlm.nih.gov/articles/PMC4913862/)"
    },
    {
         "question": "10. –ö–∞–∫–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –ù–ï —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –º–∞–ª—è—Ä–∏–∏?",
         "options": ["–°—Ç–æ—è—á–∞—è –≤–æ–¥–∞", "–í—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞", "–ù–∏–∑–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å", "–ü–ª–æ—Ç–Ω–∞—è —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"],
         "correct": 2,
         "explanation": "–ù—É –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å—É–¥–∏–º –ª–æ–≥–∏—á–µ—Å–∫–∏: —Å—Ç–æ—è—á–∞—è –≤–æ–¥–∞ –∏ –ø–ª–æ—Ç–Ω–∞—è —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - —ç—Ç–æ —Ç–æ, —á—Ç–æ –ª—é–±—è—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ Anopheles. –ì–ª–∞–≤–Ω–æ–µ —á—Ç–æ–±—ã –∏—Ö –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏–ª–∏ –∏ –±—ã–ª–æ –≥–¥–µ —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è. –í—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ —Ü–µ–ª–æ–º, —Ç–æ–∂–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π, —Ç–∞–∫ –∫–∞–∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥—ã —Å–ø–æ—Å–æ–±–Ω—ã –≤—ã–∂–∏–≤–∞—Ç—å –≤ —É—Å–ª–æ–≤–∏—è—Ö –≥–¥–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 40¬∞C. –ê –≤–æ—Ç –Ω–∏–∑–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–∞–µ—Ç –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –ª–∏—á–∏–Ω–æ–∫ –∫–æ–º–∞—Ä–æ–≤, —á—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç —à–∞–Ω—Å—ã –Ω–∞ –ø–æ—è–≤–ª–µ–Ω–∏–µ –≤–∑—Ä–æ—Å–ª—ã—Ö –æ—Å–æ–±–µ–π, –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, —Ä–∏—Å–∫ –ø–µ—Ä–µ–¥–∞—á–∏ –º–∞–ª—è—Ä–∏–∏."
    },
    {
         "question": "11. –ö–∞–∫–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–∏–º–ø—Ç–æ–º–æ–≤ —è–≤–ª—è–µ—Ç—Å—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–º –¥–ª—è —Ç—è–∂–µ–ª–æ–π —Ñ–æ—Ä–º—ã –º–∞–ª—è—Ä–∏–∏?",
         "options": ["–õ–µ–≥–∫–∞—è –ª–∏—Ö–æ—Ä–∞–¥–∫–∞", "–ì–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å", "–ñ–µ–ª—Ç—É—Ö–∞", "–°—ã–ø—å"],
         "correct": 2,
         "explanation": "–ñ–µ–ª—Ç—É—Ö–∞ –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—á–µ–Ω–∏ –∏ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–∑–Ω–∞–∫–æ–º —Ç—è–∂–µ–ª–æ–π –º–∞–ª—è—Ä–∏–∏. [–ò—Å—Ç–æ—á–Ω–∏–∫](https://ru.wikipedia.org/wiki/–ú–∞–ª—è—Ä–∏—è#–≠—Ç–∏–æ–ª–æ–≥–∏—è_–∏_–ø–∞—Ç–æ–≥–µ–Ω–µ–∑)"
    },
    {
         "question": "12. –ö–∞–∫–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–æ–ø—É–ª—è—Ü–∏–∏ –º–∞–ª—è—Ä–∏–π–Ω—ã—Ö –∫–æ–º–∞—Ä–æ–≤ —Å—á–∏—Ç–∞–µ—Ç—Å—è —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º?",
         "options": ["–ú–∞—Å—Å–æ–≤–æ–µ —Ä–∞—Å–ø—ã–ª–µ–Ω–∏–µ –∏–Ω—Å–µ–∫—Ç–∏—Ü–∏–¥–æ–≤", "–û—Å—É—à–µ–Ω–∏–µ –±–æ–ª–æ—Ç", "–í–≤–µ–¥–µ–Ω–∏–µ —Å—Ç–µ—Ä–∏–ª—å–Ω—ã—Ö —Å–∞–º—Ü–æ–≤"],
         "correct": 2,
         "explanation": "–í–≤–µ–¥–µ–Ω–∏–µ —Å—Ç–µ—Ä–∏–ª—å–Ω—ã—Ö —Å–∞–º—Ü–æ–≤ —Å–Ω–∏–∂–∞–µ—Ç –ø–æ–ø—É–ª—è—Ü–∏—é –∫–æ–º–∞—Ä–æ–≤ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö –≤–µ—â–µ—Å—Ç–≤, —á—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –æ–∫—Ä—É–∂–∞—é—â—É—é —Å—Ä–µ–¥—É. –ö–∞–∂–µ—Ç—Å—è, –ª–æ–≥–∏—á–Ω–æ?"
    },
    {
         "question": "13. –ë—ã–ª–∞ –ª–∏ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –º–∞–ª—è—Ä–∏—è –≤ –†–æ—Å—Å–∏–∏, –∏–ª–∏ —ç—Ç–æ –±–æ–ª–µ–∑–Ω—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –∂–∞—Ä–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∞—Ö?",
         "options": ["–î–∞, –±—ã–ª–∞", "–ù–µ—Ç, –æ–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –ê—Ñ—Ä–∏–∫–µ –±—ã–≤–∞–µ—Ç"],
         "correct": 0,
         "explanation": "–î–∞, –º–∞–ª—è—Ä–∏—è –±—ã–ª–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –∫–∞–∫ –º–∞—Å—Å–æ–≤–æ–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏ —Å 1920—Ö –≥–æ–¥–æ–≤. –í 50-60—Ö –≥–æ–¥–∞—Ö —É–≥—Ä–æ–∑–∞ –º–∞—Å—Å–æ–≤–æ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –±—ã–ª–∞ –ª–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω–∞, –æ–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–¥–∞ –°–°–°–† —Å–∏—Ç—É–∞—Ü–∏—è –≤–Ω–æ–≤—å –æ—Å–ª–æ–∂–Ω–∏–ª–∞—Å—å –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –ú–æ—Å–∫–≤—ã –∏ –ú–û. –°–∏—Ç—É–∞—Ü–∏—é —É–¥–∞–ª–æ—Å—å —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ –Ω–∞—á–∞–ª–µ –Ω—É–ª–µ–≤—ã—Ö. –ü–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](https://doi.org/10.1186/s12936-020-03187-8)"
    },
    {
         "question": "14. –ü—Ä–∞–≤–¥–∞ –ª–∏, —á—Ç–æ –≤–∞–∫—Ü–∏–Ω—É –æ—Ç –º–∞–ª—è—Ä–∏–∏ –∏–∑–æ–±—Ä–µ–ª–∏?",
         "options": ["–î–∞", "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ—Ç", "–ù–µ –≤–∞–∫—Ü–∏–Ω—É, –∞ —Å—ã–≤–æ—Ä–æ—Ç–∫—É"],
         "correct": 0,
         "explanation": "–î–∞, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –≤ 2021 –≥–æ–¥—É –í–û–ó –∞–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–ª–∞ –ø–µ—Ä–≤—É—é –≤–∞–∫—Ü–∏–Ω—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∫–æ–º–±–∏–Ω–∞–Ω—Ç–Ω–æ–≥–æ –±–µ–ª–∫–∞ RTS,S/AS01 –¥–ª—è –¥–µ—Ç–µ–π. –≠—Ç–∞ –≤–∞–∫—Ü–∏–Ω–∞ –¥–æ–∫–∞–∑–∞–ª–∞ —Å–≤–æ—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞—Ç—å –∑–∞–±–æ–ª–µ–≤–∞–µ–º–æ—Å—Ç—å –º–∞–ª—è—Ä–∏–µ–π –∏, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, —Ä–∞–∑–≤–∏—Ç–∏–µ –µ–µ —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ–π —Ç—è–∂–µ–ª–æ–π —Ñ–æ—Ä–º—ã —Å—Ä–µ–¥–∏ –¥–µ—Ç–µ–π –º–ª–∞–¥—à–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞. –í –æ–∫—Ç—è–±—Ä–µ 2023 –≥. –í–û–ó —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª–∞ –≤—Ç–æ—Ä—É—é –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –≤–∞–∫—Ü–∏–Ω—É –ø—Ä–æ—Ç–∏–≤ –º–∞–ª—è—Ä–∏–∏ R21/Matrix-M. –ï—Å–ª–∏ –Ω–µ –≤–µ—Ä–∏—Ç–µ, —Å–º–æ—Ç—Ä–∏—Ç–µ —Å–∞–º–∏ [—Ç—É—Ç](https://ggsel.net/catalog/product/4026100)"
    },
    {
         "question": "15. –ö–∞–∫–æ–π —Ñ–∞–∫—Ç –ø—Ä–æ –º–∞–ª—è—Ä–∏–π–Ω—ã—Ö –∫–æ–º–∞—Ä–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–¥–æ–π? 1. –ú–∞–ª—è—Ä–∏–π–Ω—ã–µ –∫–æ–º–∞—Ä—ã –±–æ—è—Ç—Å—è –∫—Ä–∞—Å–Ω–æ–≥–æ —Å–≤–µ—Ç–∞; 2. –ö–æ–º–∞—Ä—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç –∫—É—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ—Ö, –∫—Ç–æ —Å—ä–µ–ª —á—Ç–æ-—Ç–æ –≤–∫—É—Å–Ω–æ–µ; 3. –ú–∞–ª—è—Ä–∏–π–Ω—ã–µ –∫–æ–º–∞—Ä—ã - —Å–∞–º—ã–µ —Å–º–µ—Ä—Ç–æ–Ω–æ—Å–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –Ω–∞ –ø–ª–∞–Ω–µ—Ç–µ; 4. –ü–æ—Å–ª–µ —É–∫—É—Å–∞ —á–µ–ª–æ–≤–µ–∫–∞ –∫–æ–º–∞—Ä—ã –≤–ø—Ä—ã—Å–∫–∏–≤–∞—é—Ç –ø–∞—Ä–∞–∑–∏—Ç–∞ –∏ —Å—Ä–∞–∑—É –∂–µ –ø–æ–≥–∏–±–∞—é—Ç",
         "options": ["1", "2", "3", "4"],
         "correct": 2,
         "explanation": "–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã —Å–µ–π—á–∞—Å —É–¥–∏–≤–∏—Ç–µ—Å—å, –Ω–æ –¥–∞, –º–∞–ª—è—Ä–∏–π–Ω—ã–µ –∫–æ–º–∞—Ä—ã –°–ê–ú–´–ï —Å–º–µ—Ä—Ç–æ–Ω–æ—Å–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∞, –≤–µ–¥—å –æ—Ç –Ω–∏—Ö –ø–æ–≥–∏–±–∞–µ—Ç –±–æ–ª–µ–µ 600 —Ç—ã—Å—è—á —Ü–µ–ª–æ–≤–µ–∫ –≤ –≥–æ–¥. –î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è: –æ—Ç –∞–∫—É–ª –ø–æ–≥–∏–±–∞–µ—Ç 6-15 —á–µ–ª/–≥–æ–¥, –∞ –æ—Ç —Å–æ–±–∞–∫ 58 —Ç—ã—Å. —á–µ–ª/–≥–æ–¥ [–í–æ—Ç —Ç–∞–∫ –≤–æ—Ç.](https://journal.tinkoff.ru/short/dangerous-meow/)"
    },
    {
         "question": "16. –ù—É –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –∫—Ç–æ –≤—Å–µ-—Ç–∞–∫–∏ –Ω–∞—Å –∫—É—Å–∞–µ—Ç? –°–∞–º–∫–∏ –∏–ª–∏ —Å–∞–º—Ü—ã?",
         "options": ["–°–∞–º–∫–∏", "–ò —Ç–µ, –∏ –¥—Ä—É–≥–∏–µ. –ü–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é", "–ñ–µ–Ω—â–∏–Ω –∫—É—Å–∞—é—Ç —Å–∞–º—Ü—ã, –∞ –º—É–∂—á–∏–Ω —Å–∞–º–∫–∏", "–°–∞–º—Ü—ã"],
         "correct": 0,
         "explanation": "–î–∞–≤–∞–π—Ç–µ —É–∂–µ –Ω–∞–∫–æ–Ω–µ—Ü –∑–∞–∫—Ä–æ–µ–º —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å —Ä–∞–∑ –∏ –Ω–∞–≤—Å–µ–≥–¥–∞: –Ω–∞—Å –∫—É—Å–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º–∫–∏! –£ —Å–∞–º—Ü–æ–≤ –Ω–µ–¥–æ—Ä–∞–∑–≤–∏—Ç —Ä–æ—Ç–æ–≤–æ–π –∞–ø–ø–∞—Ä–∞—Ç, –ø–æ —ç—Ç–æ–º—É –æ–Ω–∏ —Å–ø–æ–∫–æ–π–Ω–æ –ø–∞—Å—É—Ç—Å—è –Ω–∞ –ª—É–≥—É –∏ –ø—å—é—Ç —Ü–≤–µ—Ç–æ—á–Ω—ã–π –Ω–µ–∫—Ç–∞—Ä. –ò—Ö —Ä–æ–ª—å - —Ç–æ–ª—å–∫–æ –æ—Å–µ–º–µ–Ω—è—Ç—å —Å–∞–º–æ–∫. [–ó–∞–∫—Ä–µ–ø–ª—è–µ–º](https://ru.wikipedia.org/wiki/–ö—Ä–æ–≤–æ—Å–æ—Å—É—â–∏–µ_–∫–æ–º–∞—Ä—ã)"
    }
    # –î–æ–±–∞–≤—å —Å—é–¥–∞ –±–æ–ª—å—à–µ –≤–æ–ø—Ä–æ—Å–æ–≤
]

# –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user_states = {}

# –ö–æ–º–∞–Ω–¥–∞ /start
@dp.message(Command("start"))
async def start(message: types.Message):
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üéÆ –ò–≥—Ä–∞—Ç—å", callback_data="play_game")],
        [InlineKeyboardButton(text="üß† –í–∏–∫—Ç–æ—Ä–∏–Ω–∞", callback_data="start_quiz")]
    ])
    await message.answer("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=keyboard)

# –∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
@dp.callback_query(lambda call: call.data == "play_game")
async def play_game(callback: types.CallbackQuery):
    await callback.answer()  # –ó–∞–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    game_url = "https://taptosurvive.vercel.app"  # –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—É—é –∏–≥—Ä—É
    web_app = WebAppInfo(url=game_url)
    await callback.message.answer(
        "–ù–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—É –ø—Ä—è–º–æ –≤ Telegram:",
        reply_markup=InlineKeyboardMarkup(inline_keyboard=[
            [InlineKeyboardButton(text="üéÆ –ò–≥—Ä–∞—Ç—å", web_app=web_app)]
        ])
    )


# –ó–∞–ø—É—Å–∫ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
@dp.callback_query(lambda call: call.data == "start_quiz")
async def start_quiz(callback: types.CallbackQuery):
    logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {callback.from_user.id} –Ω–∞—á–∞–ª –≤–∏–∫—Ç–æ—Ä–∏–Ω—É.")
    user_id = callback.from_user.id
    user_states[user_id] = {"current_question": 0, "score": 0}
    await callback.answer()  # –ó–∞–∫—Ä—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    await send_question(user_id)

# –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
async def send_question(user_id):
    try:
        state = user_states.get(user_id, {"current_question": 0, "score": 0})
        user_states[user_id] = state  # –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

        current_question = state["current_question"]
        logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id}, —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å: {current_question}")

        if current_question >= len(quiz_data):
            score = state["score"]
            total = len(quiz_data)
            logger.info(f"–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}. –ë–∞–ª–ª—ã: {score}/{total}")

            if score <= 1:
                message = f"–¢—ã –Ω–∞–±—Ä–∞–ª {score}/{total} –±–∞–ª–ª–æ–≤. –ü—É-–ø—É-–ø—É—É—É... –Ω—É –∫–∞–∫ –±—ã —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ–±—ã –Ω–µ –æ–±–∏–¥–µ—Ç—å... —ç–º... –º–æ–∂–µ—Ç –µ—â–µ —Ä–∞–∑ –ø—Ä–æ–π–¥–µ–º —Ç–µ—Å—Ç–∏–∫? :)"
            elif score <= 5:
                message = f"–¢—ã –Ω–∞–±—Ä–∞–ª {score}/{total} –±–∞–ª–ª–æ–≤. –î–∞–≤–∞–π —Ç–∞–∫, –µ—Å–ª–∏ —Å–æ–±–∏—Ä–µ—à—å—Å—è –≤ –æ—Ç–ø—É—Å–∫ –≤ –ê—Ñ—Ä–∏–∫—É, –æ–±–µ—â–∞–π —á—Ç–æ –≤ –æ–¥–∏–Ω–æ—á–∫—É –Ω–µ –ø–æ–µ–¥–µ—à—å. –ú–∞–ª–æ –ª–∏... –∏–ª–∏ –ª—É—á—à–µ –ø–µ—Ä–µ–ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç"
            elif score <= 10:
                message = f"–¢—ã –Ω–∞–±—Ä–∞–ª {score}/{total} –±–∞–ª–ª–æ–≤. –≠—Ç–æ –≤–µ—Å—å–º–∞ –Ω–µ –ø–ª–æ—Ö–æ! –î–ª—è –Ω–æ–≤–∏—á–∫–∞ :) –°–∫–∏–Ω—å –¥—Ä—É–∑—å—è–º, –ø—Ä–æ–≤–µ—Ä–∏–º –Ω–∞ —Å–∫–æ–ª—å–∫–æ –æ–Ω–∏ —Ö–æ—Ä–æ—à–∏ –≤ —ç—Ç–æ–º?"
            elif score <= 15:
                message = f"–¢—ã –Ω–∞–±—Ä–∞–ª {score}/{total} –±–∞–ª–ª–æ–≤. –≠—Ç–æ –±—ã–ª–æ –≤–ø–µ—á–∞—Ç–ª—è—é—â–µ! –í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –∑–∞–¥—É–º–∞—Ç—å—Å—è –æ –ø—Ä–æ—Å–≤–µ—Ç–∏—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ä—å–µ—Ä–µ. –¢–∞–∫–∏–µ –∑–Ω–∞–Ω–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–ø–∞–¥–∞—Ç—å!"
            else:
                message = f"–¢—ã –Ω–∞–±—Ä–∞–ª {score}/{total} –±–∞–ª–ª–æ–≤. –ß—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–æ –º–∞–ª—è—Ä–∏–π–Ω—ã—Ö –∫–æ–º–∞—Ä–æ–≤ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –∫–∞–∫ –º–∞–ª—è—Ä–∏–π–Ω—ã–π –∫–æ–º–∞—Ä - —ç—Ç–∏–º –≤—ã —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–≤–∞–ª–∏—Å—å? –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∫–∞–∂–µ—Ç—Å—è, —É –Ω–∞—Å –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π —ç–∫—Å–ø–µ—Ä—Ç!"

            await bot.send_message(user_id, message)
            user_states.pop(user_id, None)
            return

        question = quiz_data[current_question]
        options = question.get("options", [])
        if not options:  # –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—É—Å—Ç
            logger.error(f"–û—à–∏–±–∫–∞: –ø—É—Å—Ç—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ {current_question}.")
            await bot.send_message(user_id, "–û—à–∏–±–∫–∞ –≤ –¥–∞–Ω–Ω—ã—Ö –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã.")
            user_states.pop(user_id, None)
            return

        # –°–æ–∑–¥–∞—ë–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
        keyboard = InlineKeyboardMarkup(inline_keyboard=[
            [InlineKeyboardButton(text=opt, callback_data=f"answer_{i}")]
            for i, opt in enumerate(options)
        ])

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å
        await bot.send_message(user_id, question["question"], reply_markup=keyboard)
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –≤ send_question –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}: {e}")
        await bot.send_message(user_id, "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —Å /start.")

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞
@dp.callback_query(lambda call: call.data.startswith("answer_"))
async def process_answer(callback: types.CallbackQuery):
    try:
        user_id = callback.from_user.id
        state = user_states.get(user_id)

        if not state:  # –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
            logger.warning(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –ø—ã—Ç–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–∏—Ç—å –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã.")
            await callback.answer("–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞. –ù–∞—á–Ω–∏—Ç–µ —Å /start.")
            return

        current_question = state["current_question"]
        question = quiz_data[current_question]
        options = question.get("options", [])
        correct_answer = question.get("correct", -1)

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
        if correct_answer < 0 or correct_answer >= len(options):
            logger.error(f"–ò–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã. –í–æ–ø—Ä–æ—Å: {current_question}.")
            await callback.message.answer("–û—à–∏–±–∫–∞: –¥–∞–Ω–Ω—ã–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.")
            user_states.pop(user_id, None)
            return

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user_answer = int(callback.data.split("_")[1])
        logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –æ—Ç–≤–µ—Ç–∏–ª {user_answer} –Ω–∞ –≤–æ–ø—Ä–æ—Å {current_question}.")

        if user_answer == correct_answer:
            state["score"] += 1
            response = "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!"
        else:
            correct_option = options[correct_answer]
            response = f"‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: {correct_option}."

        response += f"\n\n{question.get('explanation', '')}"
        await callback.message.answer(response, parse_mode="Markdown")
        await callback.answer()

        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
        state["current_question"] += 1
        await send_question(user_id)
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –≤ process_answer –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {callback.from_user.id}: {e}")
        await callback.message.answer("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ —Å /start.")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
async def main():
    try:
        logger.info("–ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...")
        await dp.start_polling(bot)
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –≤ –≥–ª–∞–≤–Ω–æ–º —Ü–∏–∫–ª–µ: {e}")

if __name__ == "__main__":
    asyncio.run(main())
